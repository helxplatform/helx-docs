

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>HeLx Documentation &mdash; HeLx 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="HeLx Framework Overview" href="tycho.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home" alt="Documentation Home"> HeLx
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="tycho.html">Tycho</a></li>
<li class="toctree-l1"><a class="reference internal" href="appstore.html">AppStore</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">HeLx</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#" class="icon icon-home"></a> &raquo;</li>
        
      <li>HeLx Documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="helx-documentation">
<h1>HeLx Documentation<a class="headerlink" href="#helx-documentation" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Release</dt>
<dd class="field-odd"><p>1.0</p>
</dd>
<dt class="field-even">Date</dt>
<dd class="field-even"><p>Oct 14, 2020</p>
</dd>
</dl>
<p>HeLx puts the most advanced analytical scientific models at
investigator’s finger tips using equally advanced cloud native,
container orchestrated, distributed computing systems. HeLx can be
applied in many domains. Its ability to empower researchers to leverage
advanced analytical tools without installation or other infrastructure
concerns has broad reaching benefits.</p>
<p>Contact <a class="reference external" href="mailto:catalyst-admin&#37;&#52;&#48;lists&#46;renci&#46;org">HeLx Help</a> with
questions.</p>
<div class="section" id="installing-helx">
<h2>Installing HeLx<a class="headerlink" href="#installing-helx" title="Permalink to this headline">¶</a></h2>
<p>These instructions aim at offering way to deploy, run and maintain a HeLx installation on any kind of Kubernetes-based cloud infrastructure.</p>
<p>You can use this on your laptop, in your on-prem datacentre or public cloud. With the power of Kubernetes, many scenarios are possible.</p>
<div class="section" id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt>kubectl</dt><dd><ul>
<li><p>Needs to be configured with a kubeconfig to access the cluster</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>git</p></li>
<li><p>Helm version 2</p></li>
<li><p>Access to a Kubernetes cluster.  Currently we use Kubernetes version 1.17 for development and testing.  Older and newer versions of Kubernetes should also work.</p></li>
<li><p>Admin access to a namespace on a Kubernetes cluster as well as the ability to create Persistent Volumes on the cluster.</p></li>
</ul>
<p>Copy the example configuration file below to a new file and adjust the variables according to the information below.</p>
<p>The applications use NFS for persistent storage so the ability to create NFS shares is needed.  Create two directories on the NFS server and specify the locations in the CAT_NFS_PATH (for user and app data) and APPSTORE_OAUTH_NFS_PATH (for Django database) variables.  The NFS server also needs to be specified in the CAT_NFS_SERVER variable.</p>
<p>TLS is used for securing the web traffic.  Create a Kubernetes secret in the namespace that HeLx is going to be deployed in that contains the certificate, key, and CA certificate.  Set the NGINX_TLS_SECRET variable to the name of the secret.</p>
<p>Set NGINX_IP to the IP that the web service should assigned to.</p>
<p>Set a username and password for the DJANGO user.</p>
<p>Set a random 50 character password to the SECRET_KEY for Django.</p>
<p>In your GitHub account create an OAuth application for HeLx.  The “Homepage URL” in the GitHub OAuth settings should be set to the root of your HeLx website.  The “Authorization callback URL” should be set to “<a class="reference external" href="https://www.example.com/github/account">https://www.example.com/github/account</a>”.  Once the OAuth App is created take the Client ID and Client Secret and assign them to the GITHUB_CLINET_ID and GITHUB_SECRET.</p>
<p>Set a password for CLOUD_TOP_VNC_PW.</p>
<p>Set a username and password for the outgoing email service to use.  Currently this is set to use a Google Email App username and password and Google’s SMTP server.</p>
<div class="section" id="an-example-configuration-file">
<h4>An Example Configuration File<a class="headerlink" href="#an-example-configuration-file" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">export</span> <span class="pre">CLUSTER_NAME=&quot;helx-cluster&quot;</span> <span class="pre">#</span> <span class="pre">GKE</span> <span class="pre">cluster</span> <span class="pre">name</span> <span class="pre">and</span> <span class="pre">also</span> <span class="pre">used</span> <span class="pre">for</span> <span class="pre">other</span> <span class="pre">object</span> <span class="pre">names.</span>
<span class="pre">export</span> <span class="pre">NAMESPACE=&quot;helx&quot;</span>
<span class="pre">PV_DIR=&quot;/srv/k8s-pvs/$NAMESPACE&quot;</span>
<span class="pre">export</span> <span class="pre">CAT_NFS_SERVER=&quot;nfs.example.com&quot;</span>
<span class="pre">export</span> <span class="pre">CAT_NFS_PATH=&quot;$PV_DIR/stdnfs&quot;</span>
<span class="pre">export</span> <span class="pre">NGINX_SERVERNAME=&quot;helx.example.com&quot;</span>
<span class="pre">export</span> <span class="pre">NGINX_IP=&quot;192.168.0.1&quot;</span>
<span class="pre">export</span> <span class="pre">NGINX_TLS_SECRET=&quot;helx-tls-secret&quot;</span>
<span class="pre">export</span> <span class="pre">APPSTORE_IMAGE=&quot;heliumdatastage/appstore:mastercca-v0.0.18&quot;</span>
<span class="pre">export</span> <span class="pre">TYCHO_API_IMAGE=&quot;heliumdatastage/tycho-api:develop-v0.0.22&quot;</span>
<span class="pre">export</span> <span class="pre">NGINX_IMAGE=&quot;heliumdatastage/nginx:cca-v0.0.5&quot;</span>
<span class="pre">export</span> <span class="pre">APPSTORE_OAUTH_NFS_PATH=&quot;$PV_DIR/appstore-oauth&quot;</span>
<span class="pre">export</span> <span class="pre">APPSTORE_DJANGO_USERNAME=&quot;admin&quot;</span>
<span class="pre">export</span> <span class="pre">APPSTORE_DJANGO_PASSWORD=&quot;&lt;</span> <span class="pre">SECRET</span> <span class="pre">HERE</span> <span class="pre">&gt;&quot;</span>
<span class="pre">export</span> <span class="pre">SECRET_KEY=&quot;&lt;</span> <span class="pre">SECRET</span> <span class="pre">HERE</span> <span class="pre">(50</span> <span class="pre">chars)</span> <span class="pre">&gt;&quot;</span>
<span class="pre">export</span> <span class="pre">OAUTH_PROVIDERS=&quot;github&quot;</span>
<span class="pre">export</span> <span class="pre">GITHUB_NAME=&quot;&lt;GitHub</span> <span class="pre">OAuth</span> <span class="pre">App</span> <span class="pre">Name&gt;&quot;</span>
<span class="pre">export</span> <span class="pre">GITHUB_CLIENT_ID=&quot;&lt;</span> <span class="pre">SECRET</span> <span class="pre">HERE</span> <span class="pre">&gt;&quot;</span>
<span class="pre">export</span> <span class="pre">GITHUB_SECRET=&quot;&lt;</span> <span class="pre">SECRET</span> <span class="pre">HERE</span> <span class="pre">&gt;&quot;</span>
<span class="pre">export</span> <span class="pre">CLOUD_TOP_VNC_PW='&lt;</span> <span class="pre">SECRET</span> <span class="pre">HERE</span> <span class="pre">&gt;'</span>
<span class="pre">export</span> <span class="pre">EMAIL_HOST_USER=&quot;email&#64;example.com&quot;</span>
<span class="pre">export</span> <span class="pre">EMAIL_HOST_PASSWORD=&quot;&lt;</span> <span class="pre">SECRET</span> <span class="pre">HERE</span> <span class="pre">&gt;&quot;</span>
<span class="pre">`</span></code></p>
</div>
<div class="section" id="commands-to-deploy-helx">
<h4>Commands to Deploy HeLx<a class="headerlink" href="#commands-to-deploy-helx" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/helxplatform/devops.git</span>
<span class="pre">cd</span> <span class="pre">devops/bin</span>
<span class="pre">./k8s-apps.sh</span> <span class="pre">-c</span> <span class="pre">$YOUR_CONFIGURATION_FILE</span> <span class="pre">deploy</span> <span class="pre">all</span>
<span class="pre">`</span></code></p>
</div>
<div class="section" id="command-to-delete-helx">
<h4>Command to Delete HeLx<a class="headerlink" href="#command-to-delete-helx" title="Permalink to this headline">¶</a></h4>
<p><cite>./k8s-apps.sh -c $YOUR_CONFIGURATION_FILE delete all</cite></p>
<p>This will leave the PVs and PVCs behind to also remove them add the following to your configuration file.</p>
<p><cite>export APPSTORE_OAUTH_PD_DELETE_W_APP=true</cite></p>
<p>Remove any persistent data from the NFS server manually.</p>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="indices-and-tables">
<h5>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tycho.html" class="btn btn-neutral float-right" title="HeLx Framework Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Isma Gilani

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>